# POSIX FileSystem Interfaces

| Name                    | C Definition                                                                                                                                                                                                                                                           | Comment |
|----------------------- |---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |------- |
| **statfs**              | int ceph<sub>statfs</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, struct statvfs \*stbuf)                                                                                                                                              |         |
| **sync<sub>fs</sub>**   | int ceph<sub>sync</sub><sub>fs</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount)                                                                                                                                                                              |         |
| getcwd                  | const char\* ceph<sub>getcwd</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount)                                                                                                                                                                                |         |
| chdir                   | int ceph<sub>chdir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path)                                                                                                                                                                       |         |
| **opendir**             | int ceph<sub>opendir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*name, struct ceph<sub>dir</sub><sub>result</sub> \*\*dirpp)                                                                                                               |         |
| fopendir                | int ceph<sub>fdopendir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, struct ceph<sub>dir</sub><sub>result</sub> \*\*dirpp)                                                                                                                     |         |
| **closedir**            | int ceph<sub>closedir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp)                                                                                                                                    |         |
| **readdir**             | struct dirent \* ceph<sub>readdir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp)                                                                                                                        |         |
| readdir<sub>r</sub>     | int ceph<sub>readdir</sub><sub>r</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp, struct dirent \*de)                                                                                                     |         |
| readdirplus<sub>r</sub> | int ceph<sub>readdirplus</sub><sub>r</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp, struct dirent \*de, struct ceph<sub>statx</sub> \*stx, unsigned want, unsigned flags, struct Inode \*\*out)         |         |
| **getdents**            | int ceph<sub>getdents</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp, char \*name, int buflen)                                                                                                           |         |
| **getdnames**           | int ceph<sub>getdnames</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp, char \*name, int buflen)                                                                                                          |         |
| **rewinddir**           | void ceph<sub>rewinddir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp)                                                                                                                                  |         |
| **telldir**             | int64<sub>t</sub> ceph<sub>telldir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp)                                                                                                                       |         |
| **seekdir**             | void ceph<sub>seekdir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, struct ceph<sub>dir</sub><sub>result</sub> \*dirp, int64<sub>t</sub> offset)                                                                                                          |         |
| **mkdir**               | int ceph<sub>mkdir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, mode<sub>t</sub> mode)                                                                                                                                                |         |
| mkdirat                 | int ceph<sub>mkdirat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, mode<sub>t</sub> mode)                                                                                                                                |         |
| mkdirs                  | int ceph<sub>mkdirs</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, mode<sub>t</sub> mode)                                                                                                                                               |         |
| **rmdir**               | int ceph<sub>rmdir</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path)                                                                                                                                                                       |         |
| **link**                | int ceph<sub>link</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*existing, const char \*newname)                                                                                                                                              |         |
| readlink                | int ceph<sub>readlink</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, char \*buf, int64<sub>t</sub> size)                                                                                                                                |         |
| readlinkat              | int ceph<sub>readlinkat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, char \*buf, int64<sub>t</sub> size)                                                                                                                |         |
| **symlink**             | int ceph<sub>symlink</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*existing, const char \*newname)                                                                                                                                           |         |
| symlinkat               | int ceph<sub>symlinkat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*existing, int dirfd, const char \*newname)                                                                                                                              |         |
| may<sub>delete</sub>    | int ceph<sub>may</sub><sub>delete</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path)                                                                                                                                                        |         |
| **unlink**              | int ceph<sub>unlink</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path)                                                                                                                                                                      |         |
| unlinkat                | int ceph<sub>unlinkat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, int flags)                                                                                                                                           |         |
| **rename**              | int ceph<sub>rename</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*from, const char \*to)                                                                                                                                                     |         |
| fstatx                  | int ceph<sub>fstatx</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, struct ceph<sub>statx</sub> \*stx, unsigned int want, unsigned int flags)                                                                                                       |         |
| statxat                 | int ceph<sub>statxat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, struct ceph<sub>statx</sub> \*stx, unsigned int want, unsigned int flags)                                                                             |         |
| **statx**               | int ceph<sub>statx</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, struct ceph<sub>statx</sub> \*stx, unsigned int want, unsigned int flags)                                                                                             |         |
| **stat**                | int ceph<sub>stat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, struct stat \*stbuf)                                                                                                                                                   |         |
| lstat                   | int ceph<sub>lstat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, struct stat \*stbuf)                                                                                                                                                  |         |
| **fsetattrx**           | int ceph<sub>fsetattrx</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, struct ceph<sub>statx</sub> \*stx, int mask)                                                                                                                                 |         |
| **chmod**               | int ceph<sub>chmod</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, mode<sub>t</sub> mode)                                                                                                                                                |         |
| lchmod                  | int ceph<sub>lchmod</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, mode<sub>t</sub> mode)                                                                                                                                               |         |
| fchmod                  | int ceph<sub>fchmod</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, mode<sub>t</sub> mode)                                                                                                                                                          |         |
| chmodat                 | int ceph<sub>chmodat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, mode<sub>t</sub> mode, int flags)                                                                                                                     |         |
| **chown**               | int ceph<sub>chown</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, int uid, int gid)                                                                                                                                                     |         |
| fchown                  | int ceph<sub>fchown</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, int uid, int gid)                                                                                                                                                               |         |
| lchown                  | int ceph<sub>lchown</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, int uid, int gid)                                                                                                                                                    |         |
| chownat                 | int ceph<sub>chownat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, uid<sub>t</sub> uid, gid<sub>t</sub> gid, int flags)                                                                                                  |         |
| **utime**               | int ceph<sub>utime</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, struct utimbuf \*buf)                                                                                                                                                 |         |
| futime                  | int ceph<sub>futime</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, struct utimbuf \*buf)                                                                                                                                                           |         |
| **utimes**              | int ceph<sub>utimes</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, struct timeval times[2])                                                                                                                                             |         |
| lutimes                 | int ceph<sub>lutimes</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, struct timeval times[2])                                                                                                                                            |         |
| futimes                 | int ceph<sub>futimes</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, struct timeval times[2])                                                                                                                                                       |         |
| futimens                | int ceph<sub>futimens</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, struct timespec times[2])                                                                                                                                                     |         |
| utimesat                | int ceph<sub>utimensat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, struct timespec times[2], int flags)                                                                                                                |         |
| **flock**               | int ceph<sub>flock</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, int operation, uint64<sub>t</sub> owner)                                                                                                                                         |         |
| **truncate**            | int ceph<sub>truncate</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, int64<sub>t</sub> size)                                                                                                                                            |         |
| **mknod**               | int ceph<sub>mknod</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, mode<sub>t</sub> mode, dev<sub>t</sub> rdev)                                                                                                                          |         |
| **open**                | int ceph<sub>open</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, int flags, mode<sub>t</sub> mode)                                                                                                                                      |         |
| openat                  | int ceph<sub>openat</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int dirfd, const char \*relpath, int flags, mode<sub>t</sub> mode)                                                                                                                      |         |
| open<sub>layout</sub>   | int ceph<sub>open</sub><sub>layout</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, int flags, mode<sub>t</sub> mode, int stripe<sub>unit</sub>, int stripe<sub>count</sub>, int object<sub>size</sub>, const char \*data<sub>pool</sub>) |         |
| **close**               | int ceph<sub>close</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd)                                                                                                                                                                                  |         |
| **lseek**               | int64<sub>t</sub> ceph<sub>lseek</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, int64<sub>t</sub> offset, int whence)                                                                                                                              |         |
| **read**                | int ceph<sub>read</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, char \*buf, int64<sub>t</sub> size, int64<sub>t</sub> offset)                                                                                                                     |         |
| **preadv**              | int ceph<sub>preadv</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, const struct iovec \*iov, int iovcnt, int64<sub>t</sub> offset)                                                                                                                 |         |
| **write**               | int ceph<sub>write</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, const char \*buf, int64<sub>t</sub> size, int64<sub>t</sub> offset)                                                                                                              |         |
| **pwritev**             | int ceph<sub>pwritev</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, const struct iovec \*iov, int iovcnt, int64<sub>t</sub> offset)                                                                                                                |         |
| ftruncate               | int ceph<sub>ftruncate</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, int64<sub>t</sub> size)                                                                                                                                                      |         |
| **fsync**               | int ceph<sub>fsync</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, int syncdataonly)                                                                                                                                                                |         |
| **fallocate**           | int ceph<sub>fallocate</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, int mode, int64<sub>t</sub> offset, int64<sub>t</sub> length)                                                                                                                |         |
| **getxattr**            | int ceph<sub>getxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name, void \*value, size<sub>t</sub> size)                                                                                                            |         |
| fgetxattr               | int ceph<sub>fgetxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, const char \*name, void \*value, size<sub>t</sub> size)                                                                                                                      |         |
| lgetxattr               | int ceph<sub>lgetxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name, void \*value, size<sub>t</sub> size)                                                                                                           |         |
| **listxattr**           | int ceph<sub>listxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, char \*list, size<sub>t</sub> size)                                                                                                                               |         |
| flistxattr              | int ceph<sub>flistxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, char \*list, size<sub>t</sub> size)                                                                                                                                         |         |
| llistxattr              | int ceph<sub>llistxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, char \*list, size<sub>t</sub> size)                                                                                                                              |         |
| **removexattr**         | int ceph<sub>removexattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name)                                                                                                                                              |         |
| fremovexattr            | int ceph<sub>fremovexattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, const char \*name)                                                                                                                                                        |         |
| lremovexattr            | int ceph<sub>lremovexattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name)                                                                                                                                             |         |
| **setxattr**            | int ceph<sub>setxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name, const void \*value, size<sub>t</sub> size, int flags)                                                                                           |         |
| fsetxattr               | int ceph<sub>fsetxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, int fd, const char \*name, const void \*value, size<sub>t</sub> size, int flags)                                                                                                     |         |
| lsetxattr               | int ceph<sub>lsetxattr</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name, const void \*value, size<sub>t</sub> size, int flags)                                                                                          |         |
| **mksnap**              | int ceph<sub>mksnap</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name, mode<sub>t</sub> mode, struct snap<sub>metadata</sub> \*snap<sub>metadata</sub>, size<sub>t</sub> nr<sub>snap</sub><sub>metadata</sub>)           |         |
| **rmsnap**              | int ceph<sub>rmsnap</sub>(struct ceph<sub>mount</sub><sub>info</sub> \*cmount, const char \*path, const char \*name)                                                                                                                                                   |         |